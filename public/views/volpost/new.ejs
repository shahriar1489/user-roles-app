<!-- The webpage where post can be be created by volunteers. --> 
<!-- ato koshto korey page gula bananor por! -_- --> 

<head>
  <title>RR- New Volpost</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
</head>
<body>

<div class="container">
  <h2>Form control: input</h2>
  <p>The form below contains two input elements; one of type text and one of type password:</p>
  
  <form>
    
    <div class="form-group">
      <label for="title">Title:</label>
      <input type="text" class="form-control" id="title">
    </div>
    
    <button type="button" class="btn btn-primary" id="submit">Submit</button>
  </form>
</div>

</body>

<script src ="/lib/jquery/dist/jquery.min.js"> </script>  <!-- jquery --> 

<script>


var newVolpost = {  // istantiated this  if adding remuneration
/*
  user: { // Need the Organization
    type: Schema.ObjectId,
    ref:  'User'  //
  },
*/
  title: "Dummy Text.", // req
  content: "DS dsajdkla sd ksajf asldfsdfoiwe fsd. asld iaifo awejf. fjaiosd a.das d.as d as.d asd.a dasda. msd.",
// No. of applications accepting
  total_applications: 100,
  aoe: [0, 0, 0, 0, 0, 0, 0],


// Remuneration
  remuneration: false,  // This is required. This wasn't instantiated. Try to upload from FE
  remuneration_amount: [0, 0, 0, 0, 0, 0, 0]

  // Data on created/updated
/*
  created: {
    type: Date,
    default: Date.now
  },

  updated:{
    type: Date
  }
*/}

console.log("After declaration, newVolpost = " + newVolpost);

// Do the AJAX Part below.
// AJAX for volpost/new.ejs
$('#submit').click(function(){  // the submission will happen

// get the title 
//newVolpost.title = JSON.stringify( $('#title').val() ); 

// now submit the content. 
  $.ajax({

  method: "POST",  // POSTing a volpost 
  url: "/api/volposts", // fix this. previously "/api/products"
  data: newVolpost // fix this. previously newProduct

  }).done(function(response){
      console.log("Succeessfully posted dummy post");
      console.log(response);
      alert("Post successful");
      //window.location.replace('/product/' + response._id);
      //window.location.replace('/volpost/' +  response._id);
  }).fail(function(response){
      //$('#error').text(JSON.parse(response.responseText).message);
      console.log("New volpost upload failed: " + response.responseText);
  });

  
});

</script>